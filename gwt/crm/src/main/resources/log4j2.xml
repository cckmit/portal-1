<?xml version="1.0" encoding="UTF-8"?>
<Configuration>
    <Properties>
        <Property name="basePath" value="${sys:catalina.home}/logs"/>
        <Property name="extension" value=".log"/>
        <Property name="appFileName" value="portal.app"/>
        <Property name="hpsmFileName" value="portal.hpsm.service"/>
        <Property name="redmineFileName" value="portal.redmine.service"/>
        <Property name="pattern" value="%d{yyyy-MM-dd HH:mm:ss.SSS} %-5p [%c{1}] [%t] - %m%n"/>
        <Property name="maxFileSize" value="512MB"/>
    </Properties>

    <Loggers>
        <Root level="DEBUG">
            <!--<AppenderRef ref="Console"/>-->
        </Root>

        <Logger name="ru.protei" level="DEBUG">
            <AppenderRef ref="PortalAppRollingFile"/>
        </Logger>
        <Logger name="protei" level="DEBUG">
            <AppenderRef ref="PortalAppRollingFile"/>
        </Logger>
        <Logger name="debuglog" level="DEBUG">
            <AppenderRef ref="PortalAppRollingFile"/>
        </Logger>
        <Logger name="ds_cluster" level="DEBUG">
            <AppenderRef ref="PortalAppRollingFile"/>
        </Logger>
        <Logger name="ds_cluster_stat" level="DEBUG">
            <AppenderRef ref="PortalAppRollingFile"/>
        </Logger>
        <Logger name="org" level="DEBUG">
            <AppenderRef ref="PortalAppRollingFile"/>
        </Logger>
        <Logger name="com" level="DEBUG">
            <AppenderRef ref="PortalAppRollingFile"/>
        </Logger>
        <Logger name="ru.protei.portal.hpsm" level="DEBUG" additivity="false">
            <AppenderRef ref="PortalHPSMRollingFile"/>
        </Logger>
        <Logger name="ru.protei.portal.redmine" level="DEBUG" additivity="false">
            <AppenderRef ref="PortalRedmineRollingFile"/>
        </Logger>

        <Logger name="DefaultListableBeanFactory" level="INFO"/>
        <Logger name="wire" level="INFO"/>
        <Logger name="headers" level="INFO"/>

        <Logger name="org.springframework" level="OFF"/>
        <Logger name="config" level="OFF"/>
        <Logger name="ru.protei.winter" level="OFF"/>
        <Logger name="liquibase" level="OFF"/>
        <Logger name="LiquibaseSchemaResolver" level="OFF"/>
        <Logger name="jdbc" level="OFF"/>
        <Logger name="SpringGwtRemoteServiceServlet" level="OFF"/>
    </Loggers>

    <Appenders>
        <Console name="Console">
            <PatternLayout pattern="${pattern}"/>
        </Console>

        <RollingFile name="PortalAppRollingFile"
                     fileName="${basePath}/${appFileName}${extension}"
                     filePattern="${basePath}/${appFileName}.%d{yyyyMMdd}.%i${extension}.gz">
            <PatternLayout><pattern>${pattern}</pattern></PatternLayout>
            <Policies>
                <SizeBasedTriggeringPolicy size="${maxFileSize}"/>
                <TimeBasedTriggeringPolicy interval="1" modulate="false"/>
            </Policies>
        </RollingFile>

        <RollingFile name="PortalHPSMRollingFile"
                     fileName="${basePath}/${hpsmFileName}${extension}"
                     filePattern="${basePath}/${hpsmFileName}.%d{yyyyMMdd}.%i${extension}.gz">
            <PatternLayout><pattern>${pattern}</pattern></PatternLayout>
            <Policies>
                <SizeBasedTriggeringPolicy size="${maxFileSize}"/>
                <TimeBasedTriggeringPolicy interval="1" modulate="false"/>
            </Policies>
        </RollingFile>

        <RollingFile name="PortalRedmineRollingFile"
                     fileName="${basePath}/${redmineFileName}${extension}"
                     filePattern="${basePath}/${redmineFileName}.%d{yyyyMMdd}.%i${extension}.gz">
            <PatternLayout><pattern>${pattern}</pattern></PatternLayout>
            <Policies>
                <SizeBasedTriggeringPolicy size="${maxFileSize}"/>
                <TimeBasedTriggeringPolicy interval="1" modulate="false"/>
            </Policies>
        </RollingFile>
    </Appenders>
</Configuration>