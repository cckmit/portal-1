<ui:UiBinder xmlns:ui='urn:ui:com.google.gwt.uibinder'
             xmlns:g='urn:import:com.google.gwt.user.client.ui'
             xmlns:fileuploader='urn:import:ru.protei.portal.ui.common.client.widget.uploader'
             xmlns:attachment='urn:import:ru.protei.portal.ui.common.client.widget.attachment.list'
             xmlns:timefield='urn:import:ru.protei.portal.ui.common.client.widget.timefield'
             xmlns:timeElapsed='urn:import:ru.protei.portal.ui.common.client.view.selector'
             xmlns:dndautoresizetextarea="urn:import:ru.protei.portal.ui.common.client.widget.dndautoresizetextarea"
             xmlns:privacyType="urn:import:ru.protei.portal.ui.common.client.widget.privacytype"
>

    <ui:with field="lang" type="ru.protei.portal.ui.common.client.lang.Lang"/>

    <g:HTMLPanel ui:field="root">
        <g:FlowPanel ui:field="commentsContainer" tag="ul" styleName="chats">
            <g:HTMLPanel tag="li" ui:field="newMessage" styleName="left new-message">

                <g:HTMLPanel ui:field="messageBlock">

                    <div ui:field="newCommentUserImage" class="image">
                        <img alt="" src="./images/user-icon-m.svg" ui:field="icon"/>
                    </div>

                    <div class="message">

                        <dndautoresizetextarea:DndAutoResizeTextArea
                                ui:field="comment"
                                styleName="form-control form-group message-input resize-vertical"
                                enablePasteImage="true"
                                minRows="5" maxRows="20"/>

                        <div class="card-body p-t-0 p-b-0">

                            <div class="row">
                                <div class="col-md-12 p-0 p-b-5">
                                    <fileuploader:AttachmentUploader ui:field="fileUploader" styleName="pull-left">
                                        <div ui:field="filesUpload" class="attach-add-btn">
                                            <i class="fas fa-paperclip"/>
                                            <ui:text from='{lang.addAttachmentBtn}'/>
                                            <i class="fas fa-circle-notch fa-spin icon-verifiable"/>
                                        </div>
                                    </fileuploader:AttachmentUploader>
                                    <div class="text-muted pull-right">
                                        <small ui:field="markupLabel"/>
                                        <g:Anchor styleName="far fa-question-circle" ui:field="markupLink" target="_blank"/>
                                    </div>

                                </div>
                            </div>

                            <div class="row">
                                <g:Button styleName="btn btn-complete" ui:field="send" text="{lang.commentSendMessage}"/>

                                <timeElapsed:ElapsedTimeTypeSelector ui:field="timeElapsedType" addStyleNames="col-md-3 p-r-0"/>

                                <div class="col-md-3 p-r-0">
                                    <timefield:TimeTextBox ui:field="timeElapsed"
                                                           styleName="form-control time-elapsed" notNull="false"/>
                                </div>

                                <div class="col-md-4 p-r-0">
                                    <g:CheckBox ui:field="privateComment" styleName="checkbox check-danger" text="{lang.commentSetPrivate}"/>
                                    <privacyType:PrivacyTypeButtonSelector ui:field="privacyType" styleName="btn-group btn-group-justified"/>
                                </div>
                            </div>

                            <div class="row">
                                <attachment:AttachmentList ui:field="attachmentList" simpleMode="true"
                                                           styleName="inline-block attachment-list-simple"/>
                            </div>
                        </div>

                        <small ui:field="timeElapsedInfoContainer" class="text-muted hide"><ui:text from='{lang.timeElapsedInfo}'/></small>

                        <div ui:field="commentPreviewContainer" class="message-preview hide">
                            <div class="message-preview-label"><ui:text from='{lang.commentPreview}'/>
                                <g:ToggleButton ui:field="isDisplayPreview" styleName="btn show-preview-btn p-t-3"
                                                title="{lang.commentPreviewIsDisplay}"/>
                            </div>
                            <div ui:field="commentPreview" class="message-preview-content markdown"/>
                        </div>
                    </div>
                </g:HTMLPanel>
            </g:HTMLPanel>
        </g:FlowPanel>
    </g:HTMLPanel>
</ui:UiBinder>